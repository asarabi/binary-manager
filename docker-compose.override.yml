# 개발용 오버라이드 - 코드 변경 시 자동 반영 (hot-reload)
# docker compose up 시 자동으로 병합됨
# 프로덕션 배포 시: docker compose -f docker-compose.yml up
services:
  backend:
    volumes:
      - ./backend/app:/app/app
    command:
      [
        "uvicorn",
        "app.main:app",
        "--host",
        "0.0.0.0",
        "--port",
        "8000",
        "--reload",
      ]

  frontend:
    image: node:20-alpine
    working_dir: /app
    command: sh -c "npm install && npm run dev -- --host 0.0.0.0 --port 80"
    volumes:
      - ./frontend:/app
      - frontend_node_modules:/app/node_modules
    environment:
      - API_TARGET=http://backend:8000

volumes:
  frontend_node_modules:
